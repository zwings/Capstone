<html>

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="./test.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/contentful@latest/dist/contentful.browser.min.js"></script>

</head>

<body>
    <template id="items-template">
        <div class="items-template-img">hi</div>
    </template>

    <div id="items-container" class="row">

    </div>


    <script type='text/javascript'>
        let cdaClient = contentful.createClient({
            space: "bqnchs7z0iy5",
            accessToken: "c0685fb14294207d1308e272df9fe0da5d6651c2efec7a4ee2c519f310ddb1d2"
        });
        var birdsArr = [];

        // Get all the entires of content-type from server.
        cdaClient.getEntries({ content_type: "birdType" })
            .then((result) => result.items)
            .then((items) => items.map((item) => item.fields))
            // .then((items) =>items.forEach((item)=>            ))
            .then((output) => output.map((item) => {
                return { ...item, photo: item.photo.fields.file.url }
            }))
            .then(output => { birdsArr = output; return output })
            .then(constructData)
        // .then(console.log);


        function constructData(data) {
            let content = "";

            data.forEach((e) => {
                content += `<div id="img-container" class="grid-row col-md-6 col-lg-3">`;
                content += `    <img class="image-icon" src="http:${e.photo}">`;
                content += '</div>';
            });

            console.log(content);

            document.getElementById('items-container').innerHTML += content;

            content = "";


        }




        // function rendering(data) {
        //     data.forEach((e) => {

        //         console.log(e);

        //         let template = $("#items-template").clone();



        //         // template.children('.items-template-img')[0].innerHTML="goodbye!";

        //         console.log(template.children('.items-template-img'));

        //         template.removeAttr('id');

        //         template.show();

        //         $('#items-container').append(template);
        //     })
        // }

    </script>
</body>

</html>