<html>

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="./test.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/contentful@latest/dist/contentful.browser.min.js"></script>
</head>

<body>
    <!--A template for birds icons-->
    <div id="icons-template" style="display:none;">
        <div id="img-container" class="grid-row col-md-6 col-lg-3">
            <img class="icons-template-img">
        </div>
    </div>
    <!--A div to contain the data from Contenful-->
    <div id="icons-container" class="row">
    </div>

    <script type='text/javascript'>
        // Set up api call.
        let cdaClient = contentful.createClient({
            space: "bqnchs7z0iy5",
            accessToken: "c0685fb14294207d1308e272df9fe0da5d6651c2efec7a4ee2c519f310ddb1d2"
        });
        var birdsArr = [];

        // Get all the entires of content-type from server.
        cdaClient.getEntries({ content_type: "birdType" })
            .then((result) => result.items)
            .then((items) => items.map((item) => item.fields))
            .then((output) => output.map((item) => {
                return { ...item, photo: item.photo.fields.file.url }
            }))
            .then((items) => items.forEach((item) => {
                birdsArr.push({ ...item, id: birdsArr.length })
            }))
            .then(constructData)
            .then(console.log);
        // Append the data retrived from Contentful to HTML. 
        function constructData() {
            birdsArr.forEach((e) => {
                let iconTemplate = $('#icons-template').clone();
                let iconContainer = iconTemplate[0].children;
                iconContainer[0].innerHTML = `<img class="icons-template-img" src="http:${e.photo}">`
                let iconsContainer = $("#icons-container");
                iconsContainer.append(iconTemplate.html());
            })
        }
    </script>
</body>
<!--  A hard code method to constructData
function constructData() {
    let content = "";

    birdsArr.forEach((e) => {
        content += `<div id="img-container" class="grid-row col-md-6 col-lg-3">`;
        content += `    <img class="image-icon" src="http:${e.photo}">`;
        content += '</div>';
    });

    console.log(content);

    document.getElementById('items-container').innerHTML += content;

    content = "";
} -->
</html>